<!-- Content Header (Page header) -->
<div class="content-header">
    <div class="container-fluid">
        <div class="alert alert-info alert-dismissible">
            <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
            <h5>
                <i class="icon fa fa-info"></i> お知らせ</h5>
            <% if (process.env.LINE_ASSISTANT_QR_CODE !== undefined) { %>
            <p>
                <a href="<%= process.env.LINE_ASSISTANT_QR_CODE %>" target="_blank">LINE
                    Assistant</a>では簡易的なコンソール機能をご利用いただけます。
                <a href="<%= process.env.LINE_ASSISTANT_QR_CODE %>" target="_blank">使ってみる</a>

            </p>
            <% } %>
        </div>

        <div class="row mb-2">
            <div class="col-sm-6">
                <h1 class="m-0 text-dark">Project Home</h1>
            </div>
            <!-- /.col -->
            <div class="col-sm-6">
                <ol class="breadcrumb float-sm-right">
                    <li class="breadcrumb-item">
                        <a href="/projects/<%= req.project.id %>/home">Project Home</a>
                    </li>
                    <!-- <li class="breadcrumb-item active">Dashboard</li> -->
                </ol>
            </div>
            <!-- /.col -->
        </div>
        <!-- /.row -->
    </div>
    <!-- /.container-fluid -->
</div>
<!-- /.content-header -->

<!-- Main content -->
<section class="content">
    <div class="container-fluid">
        <div class="row">
            <!-- Small boxes (Stat box) -->
            <div class="col-lg-3 col-6">
                <!-- small box -->
                <div class="small-box bg-success">
                    <div class="inner">
                        <h3 id="newOrderCount"></h3>
                        <p>本日の新規注文</p>
                    </div>
                    <div class="icon">
                        <i class="ion ion-bag"></i>
                    </div>
                    <a href="/projects/<%= req.project.id %>/orders" class="small-box-footer">More info <i
                            class="fa fa-arrow-circle-right"></i></a>
                </div>
            </div>
            <!-- ./col -->
            <div class="col-lg-3 col-6">
                <!-- small box -->
                <div class="small-box bg-warning">
                    <div class="inner">
                        <h3 id="newUserCount"></h3>
                        <p>本日の会員プログラム登録</p>
                    </div>
                    <div class="icon">
                        <i class="ion ion-person-add"></i>
                    </div>
                    <a href="#" class="small-box-footer">More info <i class="fa fa-arrow-circle-right"></i></a>
                </div>
            </div>
            <!-- ./col -->

            <!-- Small boxes (Stat box) -->
            <div class="col-lg-3 col-6">
                <!-- small box -->
                <div class="small-box bg-secondary">
                    <div class="inner">
                        <h3><span class="usedSpace"></span> <sup style="font-size: 20px">GB</sup></h3>
                        <p>Database Used Space</p>
                    </div>
                    <div class="icon">
                        <i class="fa fa-database"></i>
                    </div>
                    <span class="small-box-footer dbText"></span>
                </div>
            </div>
            <!-- ./col -->
            <div class="col-lg-3 col-6">
                <!-- small box -->
                <div class="small-box bg-info">
                    <div class="inner">
                        <h3><span class="health"></span></h3>
                        <p>API Health</p>
                    </div>
                    <div class="icon">
                        <i class="fa fa-heartbeat"></i>
                    </div>
                    <span class="small-box-footer version"></span>
                </div>
            </div>
            <!-- ./col -->
        </div>

        <!-- Main row -->
        <div class="row">
            <input type="hidden" name="waiterEndpoint" value="<%= process.env.WAITER_ENDPOINT %>">
            <input type="hidden" name="telemetryEndpoint" value="<%= process.env.TELEMETRY_API_ENDPOINT %>">
            <input type="hidden" name="projectId" value="<%= req.project.id %>">

            <!-- Left col -->
            <section class="col-lg-8 connectedSortable">
                <!-- solid sales graph -->
                <div class="card bg-gradient-dark" id="visitors">
                    <div class="card-header border-0">
                        <h3 class="card-title">
                            取引訪問者数
                        </h3>

                        <div class="card-tools">
                            <div class="btn-group">
                                <button type="button" class="btn bg-dark btn-tool dropdown-toggle"
                                    data-toggle="dropdown">
                                    <i class="fa fa-wrench"></i>
                                </button>
                                <div class="dropdown-menu dropdown-menu-right" role="menu">
                                    <a target="_blank" href="/projects/<%= req.project.id %>/waiter/rules"
                                        class="dropdown-item">入場制限設定を見る</a>
                                </div>
                            </div>
                            <button type="button" class="btn bg-dark btn-sm" data-widget="collapse">
                                <i class="fa fa-minus"></i>
                            </button>
                            <button type="button" class="btn bg-dark btn-sm" data-widget="remove">
                                <i class="fa fa-times"></i>
                            </button>
                        </div>
                    </div>
                    <div class="card-body">
                        <!-- <div class="chart" id="visitorsChart" style="height: 250px;"></div> -->
                        <canvas class="chart" id="visitorsChart"
                            style="min-height: 250px; height: 250px; max-height: 250px; max-width: 100%;"></canvas>
                    </div>
                    <!-- /.card-body -->
                    <div class="card-footer bg-transparent">
                    </div>
                    <!-- /.card-footer -->
                </div>
                <!-- /.card -->

                <div class="row">
                    <div class="col-md-6">
                        <!-- solid sales graph -->
                        <div class="card bg-gradient-primary" id="salesAmount">
                            <div class="card-header border-0">
                                <h3 class="card-title">
                                    <i class="fa fa-th mr-1"></i>
                                    売上高
                                </h3>

                                <div class="card-tools">
                                    <button type="button" class="btn btn-primary btn-sm daterange" data-toggle="tooltip"
                                        title="Date range">
                                        <i class="fa fa-calendar"></i>
                                    </button>
                                    <button type="button" class="btn bg-primary btn-sm" data-widget="collapse">
                                        <i class="fa fa-minus"></i>
                                    </button>
                                    <button type="button" class="btn bg-primary btn-sm" data-widget="remove">
                                        <i class="fa fa-times"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="card-body">
                                <!-- <div class="chart" id="salesAmountChart" style="height: 250px;"></div> -->
                                <canvas class="chart" id="salesAmountChart"
                                    style="min-height: 250px; height: 250px; max-height: 250px; max-width: 100%;"></canvas>
                            </div>
                            <!-- /.card-body -->
                            <div class="card-footer bg-transparent">
                                <div class="row mb-2">
                                    <ul class="nav nav-pills ml-auto mr-auto">
                                        <li class="nav-item">
                                            <a class="nav-link bg-transparent" href="#salesAmountByPaymentMethod"
                                                data-toggle="tab">決済方法</a>
                                        </li>
                                        <li class="nav-item">
                                            <a class="nav-link bg-transparent active show" href="#salesAmountByClient"
                                                data-toggle="tab">アプリケーション</a>
                                        </li>
                                        <li class="nav-item">
                                            <a class="nav-link bg-transparent" href="#salesAmountBySeller"
                                                data-toggle="tab">販売者</a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="tab-content p-0">
                                    <!-- Morris chart - Sales -->
                                    <div class="chart tab-pane" id="salesAmountByPaymentMethod">
                                        <div class="row">
                                            <% Object.values(PaymentMethodType).forEach(function(paymentMethod) { %>
                                            <div class="col-4 text-center">
                                                <input type="text" class="knob byPaymentMethod"
                                                    data-paymentMethod="<%= paymentMethod %>" data-readonly="true"
                                                    value="0" data-width="60" data-height="60" data-fgColor="#86c0ff">
                                                <div class="text-white">
                                                    <%= paymentMethod %>
                                                </div>
                                            </div>
                                            <!-- ./col -->
                                            <% }) %>
                                            <div class="col-4 text-center">
                                                <input type="text" class="knob byPaymentMethod"
                                                    data-paymentMethod="undefined" data-readonly="true" value="0"
                                                    data-width="60" data-height="60" data-fgColor="#86c0ff">
                                                <div class="text-white">
                                                    Unknown
                                                </div>
                                            </div>
                                            <!-- ./col -->
                                        </div>
                                    </div>
                                    <div class="chart tab-pane active show" id="salesAmountByClient">
                                        <div class="row">
                                            <% applications.forEach(function(application) { %>
                                            <div class="col-4 text-center">
                                                <input type="text" class="knob byClient"
                                                    data-clientId="<%= application.id %>" data-readonly="true" value="0"
                                                    data-width="60" data-height="60" data-fgColor="#86c0ff">
                                                <div class="text-white">
                                                    <%= application.name %>
                                                </div>
                                            </div>
                                            <!-- ./col -->
                                            <% }) %>
                                        </div>
                                    </div>
                                    <div class="chart tab-pane" id="salesAmountBySeller">
                                        <div class="row">
                                            <% sellers.forEach(function(seller) { %>
                                            <div class="col-4 text-center">
                                                <input type="text" class="knob bySeller"
                                                    data-sellerId="<%= seller.id %>" data-readonly="true" value="0"
                                                    data-width="60" data-height="60" data-fgColor="#86c0ff">
                                                <div class="text-white">
                                                    <%= seller.name.ja %>
                                                </div>
                                            </div>
                                            <!-- ./col -->
                                            <% }) %>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- /.card-footer -->
                            <div class="overlay">
                                <i class="fa fa-refresh fa-spin"></i>
                            </div>
                        </div>
                        <!-- /.card -->

                    </div>
                    <div class="col-md-6">
                        <!-- solid sales graph -->
                        <div class="card bg-gradient-info" id="numOrderItems">
                            <div class="card-header border-0">
                                <h3 class="card-title">
                                    <i class="fa fa-th mr-1"></i>
                                    注文アイテム数
                                </h3>

                                <div class="card-tools">
                                    <button type="button" class="btn btn-info btn-sm daterange" data-toggle="tooltip"
                                        title="Date range">
                                        <i class="fa fa-calendar"></i>
                                    </button>
                                    <button type="button" class="btn bg-info btn-sm" data-widget="collapse">
                                        <i class="fa fa-minus"></i>
                                    </button>
                                    <button type="button" class="btn bg-info btn-sm" data-widget="remove">
                                        <i class="fa fa-times"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="card-body">
                                <!-- <div class="chart" id="numOrderItemsChart" style="height: 250px;"></div> -->
                                <canvas class="chart" id="numOrderItemsChart"
                                    style="min-height: 250px; height: 250px; max-height: 250px; max-width: 100%;"></canvas>
                            </div>
                            <!-- /.card-body -->
                            <div class="card-footer bg-transparent">
                                <div class="row mb-2">
                                    <ul class="nav nav-pills ml-auto mr-auto">
                                        <li class="nav-item">
                                            <a class="nav-link bg-transparent" href="#numOrderItemsByPaymentMethod"
                                                data-toggle="tab">決済方法</a>
                                        </li>
                                        <li class="nav-item">
                                            <a class="nav-link bg-transparent active show" href="#numOrderItemsByClient"
                                                data-toggle="tab">アプリケーション</a>
                                        </li>
                                        <li class="nav-item">
                                            <a class="nav-link bg-transparent" href="#numOrderItemsBySeller"
                                                data-toggle="tab">販売者</a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="tab-content p-0">
                                    <!-- Morris chart - Sales -->
                                    <div class="chart tab-pane" id="numOrderItemsByPaymentMethod">
                                        <div class="row">
                                            <% Object.values(PaymentMethodType).forEach(function(paymentMethod) { %>
                                            <div class="col-4 text-center">
                                                <input type="text" class="knob byPaymentMethod"
                                                    data-paymentMethod="<%= paymentMethod %>" data-readonly="true"
                                                    value="0" data-width="60" data-height="60" data-fgColor="#39CCCC">
                                                <div class="text-white">
                                                    <%= paymentMethod %>
                                                </div>
                                            </div>
                                            <!-- ./col -->
                                            <% }) %>
                                            <div class="col-4 text-center">
                                                <input type="text" class="knob byPaymentMethod"
                                                    data-paymentMethod="undefined" data-readonly="true" value="0"
                                                    data-width="60" data-height="60" data-fgColor="#39CCCC">
                                                <div class="text-white">
                                                    Unknown
                                                </div>
                                            </div>
                                            <!-- ./col -->
                                        </div>
                                        <!-- /.row -->
                                    </div>
                                    <div class="chart tab-pane active show" id="numOrderItemsByClient">
                                        <div class="row">
                                            <% applications.forEach(function(application) { %>
                                            <div class="col-4 text-center">
                                                <input type="text" class="knob byClient"
                                                    data-clientId="<%= application.id %>" data-readonly="true" value="0"
                                                    data-width="60" data-height="60" data-fgColor="#39CCCC">
                                                <div class="text-white">
                                                    <%= application.name %>
                                                </div>
                                            </div>
                                            <!-- ./col -->
                                            <% }) %>
                                        </div>
                                        <!-- /.row -->
                                    </div>
                                    <div class="chart tab-pane" id="numOrderItemsBySeller">
                                        <div class="row">
                                            <% sellers.forEach(function(seller) { %>
                                            <div class="col-4 text-center">
                                                <input type="text" class="knob bySeller"
                                                    data-sellerId="<%= seller.id %>" data-readonly="true" value="0"
                                                    data-width="60" data-height="60" data-fgColor="#39CCCC">
                                                <div class="text-white">
                                                    <%= seller.name.ja %>
                                                </div>
                                            </div>
                                            <!-- ./col -->
                                            <% }) %>
                                        </div>
                                        <!-- /.row -->
                                    </div>
                                </div>
                            </div>
                            <!-- /.card-footer -->
                            <div class="overlay">
                                <i class="fa fa-refresh fa-spin"></i>
                            </div>
                        </div>
                        <!-- /.card -->

                    </div>
                </div>

                <div class="row">
                    <div class="col-md-6">
                        <!-- solid sales graph -->
                        <div class="card bg-gradient-dark" id="numPlaceOrder">
                            <div class="card-header border-0">
                                <h3 class="card-title">
                                    <i class="fa fa-th mr-1"></i>
                                    注文取引数
                                </h3>

                                <div class="card-tools">
                                    <button type="button" class="btn btn-dark btn-sm daterange" data-toggle="tooltip"
                                        title="Date range">
                                        <i class="fa fa-calendar"></i>
                                    </button>
                                    <button type="button" class="btn bg-dark btn-sm" data-widget="collapse">
                                        <i class="fa fa-minus"></i>
                                    </button>
                                    <button type="button" class="btn bg-dark btn-sm" data-widget="remove">
                                        <i class="fa fa-times"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="card-body">
                                <!-- <div class="chart" id="numPlaceOrderChart" style="height: 250px;"></div> -->
                                <canvas class="chart" id="numPlaceOrderChart"
                                    style="min-height: 250px; height: 250px; max-height: 250px; max-width: 100%;"></canvas>
                            </div>
                            <!-- /.card-body -->
                            <div class="card-footer bg-transparent">
                            </div>
                            <!-- /.card-footer -->
                            <div class="overlay">
                                <i class="fa fa-refresh fa-spin"></i>
                            </div>
                        </div>
                        <!-- /.card -->
                    </div>
                    <div class="col-md-6">
                        <div class="card bg-gradient-dark" id="numTransactions2salesAmount">
                            <div class="card-header border-0">
                                <h3 class="card-title">
                                    <i class="fa fa-th mr-1"></i>
                                    来客数と売上高
                                </h3>
                                <div class="card-tools">
                                    <button type="button" class="btn btn-dark btn-sm daterange" data-toggle="tooltip"
                                        title="Date range">
                                        <i class="fa fa-calendar"></i>
                                    </button>
                                    <button type="button" class="btn bg-dark btn-sm" data-widget="collapse">
                                        <i class="fa fa-minus"></i>
                                    </button>
                                    <button type="button" class="btn bg-dark btn-sm" data-widget="remove">
                                        <i class="fa fa-times"></i>
                                    </button>
                                </div>
                            </div><!-- /.card-header -->
                            <div class="card-body">
                                <div class="tab-content p-0">
                                    <canvas id="numTransactions2salesAmountChart" height="250"></canvas>
                                </div>
                            </div><!-- /.card-body -->
                        </div>
                    </div>
                </div>
            </section>
            <!-- /.Left col -->

            <!-- right col (We are only adding the ID to make the widgets sortable)-->
            <section class="col-lg-4 connectedSortable">

                <div class="info-box mb-3 bg-danger">
                    <span class="info-box-icon"><i class="ion-pie-graph"></i></span>

                    <div class="info-box-content">
                        <span class="info-box-text">本日の注文取引数</span>
                        <span class="info-box-number newTransactionCount">0</span>
                    </div>
                    <!-- /.info-box-content -->
                </div>
                <div class="info-box mb-3 bg-success">
                    <span class="info-box-icon"><i class="ion ion-stats-bars"></i></span>

                    <div class="info-box-content">
                        <span class="info-box-text">本日の離脱率</span>
                        <span class="info-box-number">
                            <span class="exitRate">0</span><sup style="font-size: 10px">%</sup>
                        </span>
                    </div>
                    <!-- /.info-box-content -->
                </div>
                <div class="info-box mb-3 bg-secondary">
                    <span class="info-box-icon"><i class="fa fa-tasks"></i></span>

                    <div class="info-box-content">
                        <span class="info-box-text">Queues</span>
                        <span class="info-box-number queueCount">0</span>
                    </div>
                    <!-- /.info-box-content -->
                </div>

                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">Recent Actions</h3>

                        <div class="card-tools">
                            <button type="button" class="btn btn-tool" data-widget="collapse">
                                <i class="fas fa-minus"></i>
                            </button>
                            <button type="button" class="btn btn-tool" data-widget="remove">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                    </div>
                    <!-- /.card-header -->
                    <div class="card-body p-0">
                        <ul class="products-list product-list-in-card pl-2 pr-2">
                        </ul>
                    </div>
                    <!-- /.card-body -->
                    <div class="card-footer text-center">
                        <a href="/projects/<%= req.project.id %>/actions" class="uppercase">View All Actions</a>
                    </div>
                    <!-- /.card-footer -->
                </div>

                <!-- TABLE: LATEST ORDERS -->
                <div class="card latestOrders">
                    <div class="card-header border-transparent">
                        <h3 class="card-title">最近の注文</h3>

                        <div class="card-tools">
                            <button type="button" class="btn btn-tool" data-widget="collapse">
                                <i class="fa fa-minus"></i>
                            </button>
                            <button type="button" class="btn btn-tool" data-widget="remove">
                                <i class="fa fa-times"></i>
                            </button>
                        </div>
                    </div>
                    <!-- /.card-header -->
                    <div class="card-body p-0">
                        <div class="table-responsive">
                            <table class="table m-0">
                                <thead>
                                    <tr>
                                        <th>Order Number</th>
                                        <th>Date</th>
                                        <th>Item</th>
                                        <th>Payment Method</th>
                                        <th>Status</th>
                                    </tr>
                                </thead>
                                <tbody>
                                </tbody>
                            </table>
                        </div>
                        <!-- /.table-responsive -->
                    </div>
                    <!-- /.card-body -->
                    <div class="card-footer clearfix">
                        <!-- <a href="#" class="btn btn-sm btn-info float-left">Place New Order</a> -->
                        <a target="_blank" href="/projects/<%= req.project.id %>/orders"
                            class="btn btn-sm btn-secondary float-right">View All
                            Orders</a>
                    </div>
                    <!-- /.card-footer -->
                </div>
                <!-- /.card -->
            </section>
            <!-- right col -->
        </div>
        <!-- /.row (main row) -->

    </div><!-- /.container-fluid -->
</section>
<!-- /.content -->

<!-- ChartJS 1.0.1 -->
<script src="/node_modules/admin-lte/plugins/chart.js/Chart.min.js"></script>
<script src="/js/home.js"></script>